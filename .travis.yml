language: c
source_key: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBOFFwZ1hXdVBxMkJYN3dvQUk1K1kyODk0QzE3bzFnZVFKRUphRy9ZbHJtS2IzMXJ6CmpOYmZiSWxJMDBGOGpuRTkxTnU2dEZHYThPOVpBKzhZVlhxL1hSZHl2aWcyQmhwcEIza0g1RHRQZzVYT1lwYVEKRTg0K2cwbnhqamcxYTlrOVI5K1NsK1VrY21TMGZPeWZRWTBMTmpXcGtnRmJaR216VzFSZ0MvenpudjNGMGZuSgp5V0hjUE5JZlphVC8zSmRCSmc5QllLVmhvVWdDYkx3VHBZSEZvZ0VGWGliYy9PMVoyWVUwc3BlL1lodzdocHlDCmJvbXFsREN3VytrQnIzQ3RYUzd2am5VT25DYXp1bXRMYThaU3Y2czlQMXE1MEI2dG1vOG5ibit4bzlvWHZ2SFEKdkNRaUl5cWRLTmgxQTdkVG03ZWNTaTcraG45N2VEZEp5NmlNc3dJREFRQUJBb0lCQUFhU2pOd2ZRYlNmbE9ZOAp0SkpFR012dGxVMWlFaUU3NVk5SGkrTjFTOE84aHBtSmhsaVJ4MWZUU253UUxoQklRREpjcDNPaFFnTk4wM1NMCkFYUGJPL3FTMkJzZFI1UFZCb1lnbzdseWNKR2E5UnkxRkVxbDlnaG9iTUMvQVozbU40aU5MUmNkTldnMUhNTEgKUlBScG55T2tSUEpwUFErNDNoNGdaOW9MMUt6Q0d5Ukk1MCtvcXJvRHAvWHMzN0ttQ3ZtbUhFdjdjbWtocmNrdwpUcWdqeXhJSXpPUnRaRW9zaHhsWmVocXRDUUMyTndOdTVodlYyczhWVHBzS1V6VlVNVzJSWTRNc1loT2Y1a3FyCkQ5TzlUWVhhbjZVZDhxdFpYTUZ0LzVxc1J2dFluSzVrTjBQQWJxR0YzUHB4YTdKRXpPU1RodUZRWndLd2Z5dlMKcEFKWncrRUNnWUVBLzhkeG9rMFQzMDlGWkF1RXR3OWdIRGJxRjJQSDdRZFRkL2kvckplQnlrQ2lVVUx6YUtvZgo4K3NxR3ZqSnlrbEo0Q0JwNTZJR0UrUDBCL1VVM3ZtalNacWE1cjE0dE5iVk9BRHBsTnQ0RnJNbHhxd01VOWEvClZJWVpqUWxZZ2NtNlI4d2VKSFZTWHk1SktHZXpjNmhRRlh4S0UxYTVqUk5OeEI3akJMOFllTkVDZ1lFQThUK3MKZE1PQnBnUkYwc05NNUNrVWg2NnExSmZuMjJCL0ZRQmRSQzNodVlIRHRjcnZ2QU9iZ1hRMzhBUWlobVZLS0x5WQpHSjNSU09pcDNUYTBUQVNKTy9nS0VRdHpFeVRmdjlWa0lacmpVODZkQjNIOFY3L0hWbU5KTUVuemhVbCtOdk1nCnkxNDJzK3ZJNHlsZzNkK3prMDUvem5RUUhUT29vNjFOL1pDdGprTUNnWUJ6U0E4ZFdhUVZTQU04Zmp5SXpYTkMKQkRZcDZKMFpaZTNtNnNScEk3Z3Awa3ZXV0ZpZzJkeWc4V0wrMlJjS0IxSTJwQ1ZYY3gxT0piVzlTR2Jwd0pZcAovSGJJZktsRXlIYzlVSnYyclp4SWp1SDkwMW1UQi8wZ09YaVdxcG1ybGFKUjdkdkFEdWpiWVY4enlObUd6VnVhCjgzUG5sM1QxOHJkZ0o1T21kZ0t2b1FLQmdCSlY2WkNTVDJkRHlkN0Q4ek1nSUN4VHpTNE5RWlQ5MTRyTUZVcWEKUmg2b1N5eWsrT1dNVEtSaEplTTdIVGlqdUNneWRVamhyY2RoejQ4OW1pUnc3OUU3LzkvZHcrZy9sRFhyVFFuMAowTFJNN3NoakZHL0M1cTZkS3pIZFhRSFRYU0ZtQnljTnlSQ1JxaG9CeWhmeTZaNFhpRVV6c3duVkpFc1VYK29XCnRlb3JBb0dBYlNtSFdWck9FSzV0Z0ttSVVObVJ0OXJJd1JSL2tWaW5GcHpidlQvK0dxOGQ4OVFvVG5uUHZnU3EKT1F2RXdVODlFMjZDdmo1TUUxUFhURDlaT1RXRm9xNGNwb0VKd3VZNHNMSTA3T0J2OGtuRVQ4d0RaUXNIZjZ1LwpleEhDMUV0dTZrZWpaRHIzOFY3bTJuWUNoa2VGZTk3cjBjaXJxdkJUMko0VEQ4NFl6SWM9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="
env: OPAMYES=1 JS_OF_OCAML=1 COVERAGE=1
before_install:
  - sudo add-apt-repository -y 'deb http://ppa.launchpad.net/avsm/ppa/ubuntu raring main'
  - sudo apt-get update -qq -y
  - sudo apt-get install -qq -y ocaml-nox ocaml-native-compilers opam binfmt-support camlp4-extra
  - (mkdir llvm; cd llvm; curl http://fehu.whitequark.org/files/llvm-3.4~svn188438.tbz2 | tar xjv)
  - sudo dpkg -i llvm/*_amd64.deb
  - export OPAMYES=1 OCAMLPATH=/usr/lib/ocaml/llvm-3.4/
  - opam init
  - opam install sexplib extlib ulex ounit batteries
  - 'if [ -n "$JS_OF_OCAML" ]; then opam install js_of_ocaml; fi'
  - 'if [ -n "$COVERAGE" ]; then opam install bisect; fi'
  - eval `opam config -env`
install: ./scripts/build.sh
script:  ./scripts/test.sh
