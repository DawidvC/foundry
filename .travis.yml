language: c
git:
  submodules: false
before_install:
  - sudo add-apt-repository -y 'deb http://ppa.launchpad.net/avsm/ppa/ubuntu raring main'
  - sudo apt-get update -qq -y
  - sudo apt-get install -qq -y ocaml opam binfmt-support
  - (mkdir llvm; cd llvm; curl http://fehu.whitequark.org/files/llvm-3.4~svn188438.tbz2 | tar xjv)
  - sudo dpkg -i llvm/*_amd64.deb
  - cp .travis.key ~/.ssh/id_rsa
  - git submodule update --init
install:
  - opam install sexplib extlib menhir ulex js_of_ocaml
script:
  - export OCAMLPATH=/usr/lib/ocaml/llvm-3.4/
  - ./build.sh
  - ./test.sh
